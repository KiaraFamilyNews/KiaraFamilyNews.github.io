{"version":3,"sources":["webpack://gatsby-starter-default/./src/components/layout.js","webpack://gatsby-starter-default/./src/images/dontstarve.jpeg","webpack://gatsby-starter-default/./src/images/milfkiara.jpeg","webpack://gatsby-starter-default/./src/images/smolltakamori.jpeg","webpack://gatsby-starter-default/./src/components/canvas/canvas.js","webpack://gatsby-starter-default/./src/pages/art/artCanvas.js"],"names":["Layout","children","propTypes","PropTypes","canvas","Canvas","props","state","componentDidMount","window","fabric","require","selection","setDimensions","width","innerWidth","height","innerHeight","onresize","console","log","zoom","objects","getObjects","i","object","scaleX","scaleY","left","top","original_scaleX","original_scaleY","original_left","original_top","setCoords","setCanvasZoom","renderAll","on","opt","delta","e","deltaY","getZoom","zoomToPoint","x","offsetX","y","offsetY","preventDefault","stopPropagation","this","viewportTransform","evt","clientX","clientY","changedTouches","isDragging","lastPosX","lastPosY","vpt","requestRenderAll","setViewportTransform","tooltip","target","tooltipRef","span","document","querySelector","style","visibility","images","forEach","imageItem","index","image","Image","src","onload","imgInstance","angle","opacity","set","add","render","id","border","map","className","React","image1src","image2src","image3src","TheFandomPage","title","siteTitle"],"mappings":"sKAgBMA,G,QAAS,SAAC,GAAiB,EAAfC,SAChB,OACE,mCAKJD,EAAOE,UAAY,CACjBD,SAAUE,sB,6ICxBZ,EAAe,IAA0B,0DCAzC,EAAe,IAA0B,yDCAzC,EAAe,IAA0B,6DCSrCC,EAAS,K,IA8BQC,E,YACnB,WAAYC,GAAQ,IAAD,SACjB,cAAMA,IAAN,MACKC,MAAQ,CAAEH,OAAQ,MAFN,G,uCAKnBI,kBAAA,WACE,GAAI,oBAAOC,OAAwB,CACjC,IAAMC,EAASC,gBAEfP,EAAS,IAAIM,EAAOL,OAAO,eAEpBO,WAAY,EAEnBR,EAAOS,cAAc,CACnBC,MAAOL,OAAOM,WACdC,OAAQP,OAAOQ,YAAc,KAG/BR,OAAOS,SAAW,WAChB,IAAIJ,EAAQL,OAAOM,WACfC,EAASP,OAAOQ,YAAc,GAClCE,QAAQC,IAAI,WAAaJ,GACzBG,QAAQC,IAAI,UAAYN,GAExBV,EAAOS,cAAc,CACjBC,MAAOA,EACPE,OAAQA,IApDpB,SAAuBK,GACrB,IAAIC,EAAUlB,EAAOmB,aACrB,IAAI,IAAIC,KAAKF,EAAS,CACnB,IAAIG,EAASH,EAAQE,GAClBE,EAASD,EAAOC,OAClBC,EAASF,EAAOE,OAChBC,EAAOH,EAAOG,KACdC,EAAMJ,EAAOI,IAGfJ,EAAOK,gBAAmBL,EAAOK,gBAA2BL,EAAOK,gBAAhBJ,EACnDD,EAAOM,gBAAmBN,EAAOM,gBAA2BN,EAAOM,gBAAhBJ,EACnDF,EAAOO,cAAiBP,EAAOO,cAAuBP,EAAOO,cAAdJ,EAC/CH,EAAOQ,aAAgBR,EAAOQ,aAAqBR,EAAOQ,aAAbJ,EAE7CJ,EAAOC,OAASD,EAAOK,gBAAkBT,EACzCI,EAAOE,OAASF,EAAOM,gBAAkBV,EACzCI,EAAOG,KAAOH,EAAOO,cAAgBX,EACrCI,EAAOI,IAAMJ,EAAOQ,aAAeZ,EAEnCI,EAAOS,aAoCHC,CAAcrB,EAAQ,MAEtBV,EAAOgC,aAIThC,EAAOiC,GAAG,eAAe,SAAUC,GACjC,IAAIC,EAAQD,EAAIE,EAAEC,OACdpB,EAAOjB,EAAOsC,WAClBrB,GAAI,SAAI,KAASkB,IACN,KAAIlB,EAAO,IAClBA,EAAO,IAAGA,EAAO,GACrBjB,EAAOuC,YACL,CAAEC,EAAGN,EAAIE,EAAEK,QAASC,EAAGR,EAAIE,EAAEO,SAC7B1B,GAEFiB,EAAIE,EAAEQ,iBACNV,EAAIE,EAAES,qBAIR7C,EAAOiC,GAAG,cAAc,SAAUC,GAChCnB,QAAQC,IAAI8B,KAAKC,mBACjB,IAAIC,EAAMd,EAAIE,EACVI,EAAI,EACJE,EAAI,EACR3B,QAAQC,IAAIgC,GACO,MAAfA,EAAIC,SAENT,EAAIQ,EAAIC,QACRP,EAAIM,EAAIE,UAIRV,EAAIQ,EAAIG,eAAe,GAAGF,QAC1BP,EAAIM,EAAIG,eAAe,GAAGD,SAE5BJ,KAAKM,YAAa,EAClBN,KAAKO,SAAWb,EAChBM,KAAKQ,SAAWZ,KAElB1C,EAAOiC,GAAG,cAAc,SAAUC,GAChC,GAAIY,KAAKM,WAAY,CACnB,IAAIJ,EAAMd,EAAIE,EACVI,EAAI,EACJE,EAAI,EAEW,MAAfM,EAAIC,SAENT,EAAIQ,EAAIC,QACRP,EAAIM,EAAIE,UAIRV,EAAIQ,EAAIG,eAAe,GAAGF,QAC1BP,EAAIM,EAAIG,eAAe,GAAGD,SAE5B,IAAIK,EAAMT,KAAKC,kBACfQ,EAAI,IAAMf,EAAIM,KAAKO,SACnBE,EAAI,IAAMb,EAAII,KAAKQ,SACnBR,KAAKU,mBACLV,KAAKO,SAAWb,EAChBM,KAAKQ,SAAWZ,MAGpB1C,EAAOiC,GAAG,YAAY,SAAUC,GAC9BY,KAAKW,qBAAqBX,KAAKC,mBAC/BD,KAAKM,YAAa,KAGpBpD,EAAOiC,GAAG,cAAc,SAAUG,GAAI,IAAD,EAC/BsB,EAAO,UAAGtB,EAAEuB,cAAL,aAAG,EAAUC,WAExB,GADA7C,QAAQC,IAAI0C,GACRA,EAAS,CACX,IAAIG,EAAOC,SAASC,cAAc,YAAcL,EAAU,MAC1DG,EAAKG,MAAMC,WAAa,UACxBJ,EAAKG,MAAMvC,IAAMW,EAAEA,EAAEO,QAAU,KAC/BkB,EAAKG,MAAMxC,KAAOY,EAAEA,EAAEK,QAAU,SAIpCzC,EAAOiC,GAAG,aAAa,SAAUG,GAAI,IAAD,EAC9BsB,EAAO,UAAGtB,EAAEuB,cAAL,aAAG,EAAUC,WACpBF,IACSI,SAASC,cAAc,YAAcL,EAAU,MACrDM,MAAMC,WAAa,aAQ5BC,EAAOC,SAAS,SAACC,EAAWC,GAC1B,IAAIC,EAAQ,IAAIC,MAChBD,EAAME,IAAMJ,EAAUI,IACtBF,EAAMG,OAAS,WACb,IAAIC,EAAc,IAAIpE,EAAOiE,MAAMD,EAAO,CACxC9C,KAAM4C,EAAU5C,KAChBC,IAAK2C,EAAU3C,IACfkD,MAAOP,EAAUO,MACjBC,QAASR,EAAUQ,QACnBtD,OAAQ8C,EAAU9C,OAClBC,OAAQ6C,EAAU7C,SAGpBmD,EAAYG,IAAI,cAAc,GAC9BH,EAAYG,IAAI,aAAc,MAAQR,GACtCrE,EAAO8E,IAAIJ,S,EASnBK,OAAA,WACE,OACE,gBAAC,WAAD,KACE,uBAAKC,GAAG,oBACN,0BAAQhB,MAAO,CAAEiB,OAAQ,kBAAoBD,GAAG,eAC/Cd,EAAOgB,KAAI,SAACZ,EAAOD,GAClB,OAAO,wBAAMW,GAAI,MAAQX,EAAOc,UAAU,WAAW,UAAYd,S,GA1JzCe,aAmK9BlB,EAAS,CACb,CACEM,IAAKa,EACL7D,KAAM,EACNC,IAAK,EACLkD,MAAO,EACPC,QAAS,EACTtD,OAAQ,GACRC,OAAQ,IAEV,CACEiD,IAAKc,EACL9D,KAAM,KACNC,IAAK,EACLkD,MAAO,EACPC,QAAS,EACTtD,OAAQ,GACRC,OAAQ,IAEV,CACEiD,IAAKe,EACL/D,KAAM,IACNC,IAAK,IACLkD,MAAO,EACPC,QAAS,EACTtD,OAAQ,GACRC,OAAQ,KCxNSiE,E,oJACjBrF,MAAQ,G,iCAGR4E,OAAA,WACI,OACI,2BACI,gBAAC,IAAD,CAAKU,MAAM,SACX,gBAAC,IAAD,CAAQC,UAAU,kBAClB,2BACI,wCACA,gBAACzF,EAAD,S,GAXuBmF,c","file":"component---src-pages-art-art-canvas-js-ecf263ca60a7a4a05d87.js","sourcesContent":["/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.com/docs/use-static-query/\n */\n\nimport * as React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { useStaticQuery, graphql } from \"gatsby\"\n\nimport \"./layout.css\"\nimport \"bootstrap/dist/css/bootstrap.min.css\"\nimport \"../scss/custom.scss\"\nimport \"../styles/common.css\"\n\nconst Layout = ({ children }) => {\n  return (\n    <>\n    </>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","export default __webpack_public_path__ + \"static/dontstarve-7bfa6be12ab73c2f10d5b7f4d2cf7b90.jpeg\";","export default __webpack_public_path__ + \"static/milfkiara-02af8ad9df7e9047e71fa8b289a709ef.jpeg\";","export default __webpack_public_path__ + \"static/smolltakamori-a45ec3f5cd9a7bdabdeadf87792637da.jpeg\";","import React, { useState, useEffect } from \"react\"\r\n// import { fabric } from \"fabric\"\r\n\r\nimport image1src from \"../../images/dontstarve.jpeg\"\r\nimport image2src from \"../../images/milfkiara.jpeg\"\r\nimport image3src from \"../../images/smolltakamori.jpeg\"\r\n\r\nimport \"./canvas.css\"\r\n\r\nvar canvas = null\r\nvar imageZoom = 1\r\nvar imageInstances = []\r\n\r\n// credit: https://jsfiddle.net/fvzj7z1d/7/\r\nfunction setCanvasZoom(zoom) {\r\n  var objects = canvas.getObjects();\r\n  for(var i in objects) {\r\n     var object = objects[i];\r\n    var scaleX = object.scaleX,\r\n      scaleY = object.scaleY,\r\n      left = object.left,\r\n      top = object.top;\r\n    \r\n    // preserve the original dimensions.\r\n    object.original_scaleX = !object.original_scaleX ? scaleX : object.original_scaleX;\r\n    object.original_scaleY = !object.original_scaleY ? scaleY : object.original_scaleY;\r\n    object.original_left = !object.original_left ? left : object.original_left;\r\n    object.original_top = !object.original_top ? top : object.original_top;\r\n    \r\n    object.scaleX = object.original_scaleX * zoom;\r\n    object.scaleY = object.original_scaleY * zoom;\r\n    object.left = object.original_left * zoom;\r\n    object.top = object.original_top * zoom;\r\n    \r\n    object.setCoords();\r\n  }\r\n};\r\n\r\n\r\nexport default class Canvas extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { canvas: null }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof window !== `undefined`) {\r\n      const fabric = require(\"fabric\").fabric \r\n      \r\n      canvas = new fabric.Canvas(\"imageboard\")\r\n      \r\n      canvas.selection = false\r\n\r\n      canvas.setDimensions({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight - 55,\r\n      })\r\n\r\n      window.onresize = function(){\r\n        var width = window.innerWidth;\r\n        var height = window.innerHeight - 55;\r\n        console.log('height: ' + height);\r\n        console.log('width: ' + width);\r\n\r\n        canvas.setDimensions({\r\n            width: width,\r\n            height: height\r\n        });\r\n\r\n\r\n        setCanvasZoom(width / 1710)\r\n        //canvas.calcOffset();\r\n        canvas.renderAll();\r\n      };\r\n\r\n      //zoom function\r\n      canvas.on(\"mouse:wheel\", function (opt) {\r\n        var delta = opt.e.deltaY\r\n        var zoom = canvas.getZoom()\r\n        zoom *= 0.999 ** delta\r\n        if (zoom > 10) zoom = 10\r\n        if (zoom < 1) zoom = 1\r\n        canvas.zoomToPoint(\r\n          { x: opt.e.offsetX, y: opt.e.offsetY },\r\n          zoom\r\n        )\r\n        opt.e.preventDefault()\r\n        opt.e.stopPropagation()\r\n      })\r\n\r\n      // drag function\r\n      canvas.on(\"mouse:down\", function (opt) {\r\n        console.log(this.viewportTransform)\r\n        var evt = opt.e\r\n        var x = 0;\r\n        var y = 0;\r\n        console.log(evt)\r\n        if (evt.clientX != null)\r\n        {\r\n          x = evt.clientX;\r\n          y = evt.clientY;\r\n        }\r\n        else\r\n        {\r\n          x = evt.changedTouches[0].clientX;\r\n          y = evt.changedTouches[0].clientY;\r\n        }\r\n        this.isDragging = true\r\n        this.lastPosX = x\r\n        this.lastPosY = y\r\n      })\r\n      canvas.on(\"mouse:move\", function (opt) {\r\n        if (this.isDragging) {\r\n          var evt = opt.e\r\n          var x = 0;\r\n          var y = 0;\r\n          // console.log(evt)\r\n          if (evt.clientX != null)\r\n          {\r\n            x = evt.clientX;\r\n            y = evt.clientY;\r\n          }\r\n          else\r\n          {\r\n            x = evt.changedTouches[0].clientX;\r\n            y = evt.changedTouches[0].clientY;\r\n          }\r\n          var vpt = this.viewportTransform\r\n          vpt[4] += x - this.lastPosX\r\n          vpt[5] += y - this.lastPosY\r\n          this.requestRenderAll()\r\n          this.lastPosX = x\r\n          this.lastPosY = y\r\n        }\r\n      })\r\n      canvas.on(\"mouse:up\", function (opt) {\r\n        this.setViewportTransform(this.viewportTransform)\r\n        this.isDragging = false\r\n      })\r\n\r\n      canvas.on(\"mouse:over\", function (e) {\r\n        let tooltip = e.target?.tooltipRef\r\n        console.log(tooltip)\r\n        if (tooltip) {\r\n          let span = document.querySelector('span[id=\"' + tooltip + '\"]')\r\n          span.style.visibility = 'visible'\r\n          span.style.top = e.e.offsetY + 'px'\r\n          span.style.left = e.e.offsetX + 'px'\r\n        }\r\n      })\r\n\r\n      canvas.on(\"mouse:out\", function (e) {\r\n        let tooltip = e.target?.tooltipRef\r\n        if (tooltip) {\r\n          let span = document.querySelector('span[id=\"' + tooltip + '\"]')\r\n          span.style.visibility = 'hidden'\r\n        }\r\n      })\r\n\r\n      // canvas.on('after:render', function() {\r\n      //   setCanvasZoom(window.innerWidth / 1710)\r\n      // });\r\n\r\n      images.forEach( (imageItem, index) => {\r\n        let image = new Image()\r\n        image.src = imageItem.src\r\n        image.onload = () => {\r\n          let imgInstance = new fabric.Image(image, {\r\n            left: imageItem.left,\r\n            top: imageItem.top,\r\n            angle: imageItem.angle,\r\n            opacity: imageItem.opacity,\r\n            scaleX: imageItem.scaleX,\r\n            scaleY: imageItem.scaleY,\r\n          })\r\n          //dissables to select this image\r\n          imgInstance.set(\"selectable\", false)\r\n          imgInstance.set(\"tooltipRef\", \"ref\" + index)\r\n          canvas.add(imgInstance)\r\n        }\r\n      })\r\n      \r\n      \r\n    }\r\n    \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div id=\"canvas-container\">\r\n          <canvas style={{ border: \"solid 1px #555\" }} id=\"imageboard\" />\r\n          {images.map((image, index) => {\r\n            return <span id={\"ref\" + index} className=\"toolTip\">{\"ToolTip\" + index}</span>\r\n          })}\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst images = [\r\n  {\r\n    src: image1src,\r\n    left: 0,\r\n    top: 0,\r\n    angle: 0,\r\n    opacity: 1,\r\n    scaleX: 0.3,\r\n    scaleY: 0.3,\r\n  },\r\n  {\r\n    src: image2src,\r\n    left: 1490,\r\n    top: 0,\r\n    angle: 0,\r\n    opacity: 1,\r\n    scaleX: 0.3,\r\n    scaleY: 0.3,\r\n  },\r\n  {\r\n    src: image3src,\r\n    left: 500,\r\n    top: 600,\r\n    angle: 0,\r\n    opacity: 1,\r\n    scaleX: 0.2,\r\n    scaleY: 0.2,\r\n  },\r\n]\r\n","import * as React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport Layout from \"../../components/layout\"\nimport SEO from \"../../components/seo\"\nimport Header from \"../../components/header2\"\n\n// import \"../../components/canvas/vendor/modernizr-3.11.2.min\"\n// import \"../../components/canvas/plugins\"\nimport Canvas from \"../../components/canvas/canvas\"\n\n\nexport default class TheFandomPage extends React.Component {\n    state = {\n    };\n\n    render() {\n        return (\n            <div>\n                <SEO title=\"Home\" />\n                <Header siteTitle=\"Kiara Million\" />\n                <div>\n                    <h1>Art Canvas</h1>\n                    <Canvas/>\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}